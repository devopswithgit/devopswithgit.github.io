<!DOCTYPE html>
<html>
    <head>
        <title>Accman : Centralised logging with ELK</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Accman</a></span>
                            </li>
                                                    <li>
                                <span><a href="Accman-Home_16384043.html">Accman Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Accman-Rewrite-Documentation-2013_16384056.html">Accman Rewrite Documentation 2013</a></span>
                            </li>
                                                    <li>
                                <span><a href="Logging_25628446.html">Logging</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Accman : Centralised logging with ELK
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Unknown User (aaa45815)</span>, last modified on Jun 09, 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <h2 id="CentralisedloggingwithELK-Introduction">Introduction</h2><p>The ELK stack can provide us with a solution to take all our existing logging and transactional data and push it into full text queryable data source.</p><ul><li><a href="ElasticSearch_26870093.html">ElasticSearch</a> (<a href="https://www.elastic.co/products/elasticsearch" class="external-link" rel="nofollow">ElasticSearch external site</a>)<ul><li>Indexing engine that can be queried against the data pushed into it</li></ul></li><li><a href="Logstash_26870088.html">Logstash</a> (<a href="https://www.elastic.co/products/logstash" class="external-link" rel="nofollow">Logstash external site</a>)<ul><li>A service to pull data from arbitrary data sources such as the transactions and all data logs and push them to a contralised store</li></ul></li><li><a href="Kibana_26870095.html">Kibana</a> (<a href="https://www.elastic.co/products/kibana" class="external-link" rel="nofollow">Kibana external site</a>)<ul><li>A Query and Visualisation web application for viewing the log and transaction data</li></ul></li></ul><p>Even though the general acronym is ELK, the flow of data in a general ELK setup is  Logstash -&gt; ElasticSearch -&gt; Kibana</p><h1 id="CentralisedloggingwithELK-Pros">Pros</h1><ul><li>Requires no code changes</li><li>We can search across transactions and all logs in one place</li><li>Dashboards to highlight problems</li><li>Flexbility with regards to where we pull data from e.g. include windows event logs if some current applications report nothing if they completely die</li><li>Drop all data that has been taken from various sources and re-index in a more suitable shape (it took under 11 hours to import 8.3 million transactions on a dev machine)</li><li>Link various log parts e.g. click a link to see all the log entries for a particular transaction.</li><li>Open Source</li></ul><h1 id="CentralisedloggingwithELK-Cons">Cons</h1><ul><li>It would be recommended to have a separate server for the centralised data store</li><li>Increased network traffic</li><li>Increased memory requirements on servers that contain logs<ul><li>This could be mitigated using <a href="https://www.elastic.co/products/beats/filebeat" class="external-link" rel="nofollow">filebeat</a></li></ul></li></ul><h1 id="CentralisedloggingwithELK-Statsfromadevmachine">Stats from a dev machine</h1><h2 id="CentralisedloggingwithELK-Memoryusage">Memory usage</h2><p>The following table only shows usages for the transactions from AccMan. Log files would increase the storage requirements</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Component</th><th class="confluenceTh"><p>Typical Memory Usage</p></th><th colspan="1" class="confluenceTh">Storage Requirements (transactions only)</th></tr><tr><td colspan="1" class="confluenceTd">ElasticSearch</td><td colspan="1" class="confluenceTd">~700MB</td><td colspan="1" class="confluenceTd">1.47GB</td></tr><tr><td colspan="1" class="confluenceTd">LogStash</td><td colspan="1" class="confluenceTd">~700MB</td><td colspan="1" class="confluenceTd">N/A</td></tr><tr><td colspan="1" class="confluenceTd">Kibana</td><td colspan="1" class="confluenceTd">~140MB</td><td colspan="1" class="confluenceTd"><p>N/A</p></td></tr></tbody></table></div><p>The rate of pulling data from MySQL and into ElasticSearch was consistent at around 12.5K records per minute</p>
                    </div>

                    
                                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="comments" class="pageSectionTitle">Comments:</h2>
                        </div>

                        <table border="0" width="100%">
                                                        <tr>
                                <td >
                                    <a name="comment-27623444"></a>
                                    <font class="smallfont"><p>Alun, in this and it's child pages can you put some screenshots of the various technologies mentioned? Always helps to clarify (and sell the ideas to the SMT <img class="emoticon emoticon-smile" src="images/icons/emoticons/smile.svg" data-emoticon-name="smile" alt="(smile)"/>)</p></font>
                                    <div align="left" class="smallfont" style="color: #666666; width: 98%; margin-bottom: 10px;">
                                        <img src="images/icons/contenttypes/comment_16.png" height="16" width="16" border="0" align="absmiddle"/>
                                        Posted by ujs038 at May 16, 2016 13:57
                                    </div>
                                </td>
                            </tr>
                                                    </table>
                    </div>
                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 29, 2021 10:56</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
