<!DOCTYPE html>
<html>
    <head>
        <title>Accman : Interrupting Students (IN) - 2020</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Accman</a></span>
                            </li>
                                                    <li>
                                <span><a href="Accman-Home_16384043.html">Accman Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Support-Notes_16384017.html">Support Notes</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Accman : Interrupting Students (IN) - 2020
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Mo Mumtaz</span>, last modified on Oct 22, 2020
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>A request was received to keep students enabled whilst they are interrupting. This was delivered by making a change in the lookup table (student_ests) where their is mapping between person_state and stu_ests.</p><p><br/></p><p>Originally Stu_ests of 'IN' was mapped to 'absent'. The bannerForPerson would change the person state for a student to 'absent' which would disable an account and change the account_state to disabled.</p><p><br/></p><p>Changing this mapping for 'IN' to 'present' makes the bannerForPerson change 'IN' students back to a person state of 'present' which would allow the student_auto_state to pick these accounts up for enablement. This has updated all the exsiting students that were 'IN' and also picks up any new students that become 'IN' to leave them present. However their are a few accounts that have failed to have been picked up for enablement. This is due to one of the joins in the SQL that select an account for enablement filter out these accounts. This requires further investigation as a pending task. However a workaround untill this is resolved is as follows:</p><p><br/></p><p>Run the following SQL inserting the users username in the relevant spaceholder. If a result is returned for the user then manually enable the account. If the account is not returned in the SQL then pass the incident onto devs for further investigation.</p><p><br/></p><p>select *</p><p>FROM <br/>account a<br/>LEFT JOIN statuses s ON s.status_code = a.status_code<br/>INNER JOIN person p ON p.personID = a.personID <br/>INNER JOIN department_status ds ON ds.department_status_code = a.department_status_code<br/>INNER JOIN dept_person_account d ON d.person_dept_code = p.dept_code <br/>WHERE <br/>a.username = '[USERNAME]' and <br/>p.source_code = 'S' and <br/>a.accountType = 'Personal'<br/>and<br/>p.acad_sess &gt;= '2021' and <br/>(<br/>(p.person_status_code in ('N', 'U') and a.status_code &lt; 'P') or <br/>(p.person_status_code = 'P' and a.status_code in ('P', 'Q'))<br/>) and <br/>((p.person_state IN ('present') and a.state in ('disabled') and a.disabledReason in ('Student is absent')) <br/>or<br/>(p.resit_status = 'CanEnable' and a.state = 'disabled' and a.manually_disabled != 1))</p>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 29, 2021 10:56</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
