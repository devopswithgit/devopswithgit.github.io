<!DOCTYPE html>
<html>
    <head>
        <title>Accman : Fix for Blank Janus End Dates Issue (Janus Multiple Valid Cards Release)</title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">Accman</a></span>
                            </li>
                                                    <li>
                                <span><a href="Accman-Home_16384043.html">Accman Home</a></span>
                            </li>
                                                    <li>
                                <span><a href="Documentation_16384018.html">Documentation</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            Accman : Fix for Blank Janus End Dates Issue (Janus Multiple Valid Cards Release)
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
        
            Created by <span class='author'> Julia Kelbrick</span> on Oct 16, 2013
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <p>Landesk Incident 21279 describes the case of a student who left the University in 2011, but having returned in 2013 their Janus security card remained inactive with their leaving date remaining set to the 2011 date.</p><p>The purpose of this article is to outline the fix for this problem which it is anticipated will be incorporated in to the &quot;MultipleValidCardsInJanus&quot; branch release of AccMan.</p><p>The way the code in AccMan currently works is that when the user leaves the University their EndDate value is set and the code below works satisfactorily.  However, if they return to the University, the user's EndDate is nullified by AccMan, and because EndDate now has no value, the code below does not change the &quot;LeaveDate&quot; value in Janus.</p><p>To fix this issue it is proposed that the following modification be made to the <strong>UpdateUserDetails()</strong> method of the <strong>JanusDAO</strong> class.</p><p>At the time of writing, line 299 of the code is currently . . . . .</p><pre><span style="color: rgb(0,0,255);"> if</span> (account.Person.EndDate.HasValue) LeaveDate = account.Person.EndDate;
</pre><p>This should be modified to . . . . .</p><pre><span style="color: rgb(0,0,255);"> if</span> (account.Person.EndDate.HasValue)<br/>    { <br/>        LeaveDate = account.Person.EndDate;<br/>    }</pre><pre>    else<br/>    {<br/>        <span style="color: rgb(0,0,255);">if</span> (! <span style="color: rgb(0,0,255);">string</span>.IsNullOrWhiteSpace(checkValue))        // I.E.  If the user already exists in the Janus system (therefore not a brand new user)<br/>        {<br/>            LeaveDate = '01/01/9999';<br/>        }<br/>    }</pre><p>       </p><p> </p><p> </p><p> </p>
                    </div>

                                        <div class="pageSection group">
                        <div class="pageSectionHeader">
                            <h2 id="attachments" class="pageSectionTitle">Attachments:</h2>
                        </div>

                        <div class="greybox" align="left">
                                                            <img src="images/icons/bullet_blue.gif" height="8" width="8" alt=""/>
                                <a href="attachments/16384004/16580661.png">image2013-10-16 11:57:12.png</a> (image/png)
                                <br/>
                                                    </div>
                    </div>
                    
                                                      
                </div>             </div> 
            <div id="footer" role="contentinfo">
                <section class="footer-body">
                    <p>Document generated by Confluence on Mar 29, 2021 10:56</p>
                    <div id="footer-logo"><a href="http://www.atlassian.com/">Atlassian</a></div>
                </section>
            </div>
        </div>     </body>
</html>
